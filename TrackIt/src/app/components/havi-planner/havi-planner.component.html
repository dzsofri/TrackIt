<div class="calendar-container">
  <!-- Bal oldali panel -->
  <div class="sidebar">
    <!-- N√©zetv√°lt√≥ gombok -->
    <div class="sidebar-header">
      <button class="simple-button" (click)="currentSidebarView = 'add'" [class.active]="currentSidebarView === 'add'">√öj esem√©ny</button>
      <button class="simple-button" (click)="currentSidebarView = 'list'" [class.active]="currentSidebarView === 'list'">Esem√©nyek</button>
      <button class="simple-button" (click)="NavigateTo('/haviplannerideiglenes')"> Esem√©nykezel≈ë</button>
    </div>

    <!-- √öj esem√©ny felvitele -->
    <div *ngIf="currentSidebarView === 'add'" class="add-event-view">
      <label for="eventName">Esem√©ny:</label>
      <input id="eventName" type="text" [(ngModel)]="newEvent.title" placeholder="esem√©ny neve" />

      <label for="eventDescription">Le√≠r√°s:</label>
      <textarea id="eventDescription" [(ngModel)]="newEvent.description" placeholder="esem√©ny le√≠r√°sa"></textarea>

      <div class="date-fields">
        <div class="small">
          <label for="startDateTime">Kezd√©s:</label>
          <input id="startDateTime" type="datetime-local" [(ngModel)]="newEvent.startTime" class="form-control" />
        </div>
        <div class="small">
          <label for="endDateTime">Befejez√©s:</label>
          <input id="endDateTime" type="datetime-local" [(ngModel)]="newEvent.endTime" class="form-control" />
        </div>
      </div>

      <label for="eventColor">Sz√≠n:</label>
      <p-colorpicker id="eventColor" [(ngModel)]="newEvent.color" inputId="cp-hex" />

      <button class="get-started-button" (click)="addEvent()">Hozz√°ad√°s</button>
    </div>

    <!-- Megl√©v≈ë esem√©nyek list√°ja -->
    <div *ngIf="currentSidebarView === 'list'" class="event-list-view">
      <button class="simple-button" (click)="toggleSelectMode()">
        {{ selectMode ? 'Kijel√∂l√©s bez√°r√°sa' : 'Kijel√∂l√©s m√≥d' }}
      </button>

      <div *ngFor="let event of eventss" class="event-item">
        <div class="event-content">
          <div class="event-info">
            <div class="event-title">{{ event.title }}</div>
            <div class="event-time">
              {{ event.startTime | date: 'short' }} ‚Äì {{ event.endTime | date: 'short' }}
            </div>
          </div>

          <!-- Kijel√∂l≈ë checkbox -->
          <label *ngIf="selectMode" class="checkbox-wrapper">
            <input type="checkbox" [(ngModel)]="event.selected" />
            <span class="checkmark"></span>
          </label>

          <!-- Egy√©ni t√∂rl√©s gomb minden esem√©nyhez -->
          <button class="delete-button" (click)="deleteEvent(event)">üóëÔ∏è</button>
        </div>
      </div>



      <!-- T√∂rl√©s gomb a kijel√∂lt esem√©nyekhez -->
      <div *ngIf="selectMode && selectedEvents.length > 0" class="delete-button-container">
        <button class="get-started-button" (click)="deleteSelectedEvents()">Kijel√∂lt esem√©nyek t√∂rl√©se</button>
      </div>
    </div>
  </div>

  <!-- Napt√°r -->
  <div class="calendar">
    <div class="header">
      <button (click)="prevMonth()"><img src="./assets/icons/left_arrow.png" alt="el≈ëz≈ë"></button>
      <h2>{{ months[currentMonth] }} {{ currentYear }}</h2>
      <button (click)="nextMonth()"><img src="./assets/icons/right_arrow.png" alt="k√∂vetkez≈ë"></button>
    </div>

    <div class="weekdays">
      <div *ngFor="let day of weekdays">{{ day }}</div>
    </div>

    <div class="days">
      <div *ngFor="let day of calendarDays"
           class="day"
           [class.inactive]="day.inactive"
           (click)="showDayDetails(day)"
           (touchstart)="onTouchStart($event, day)"
           (touchend)="onTouchEnd($event, day)">
        <div class="date">{{ day.date }}</div>
        <div class="events">
          <div *ngFor="let dot of day.dots" class="event-bar" [style.backgroundColor]="dot.color">
            {{ dot.title }}
          </div>
        </div>
        <div *ngIf="day.label" class="label">{{ day.label }}</div>
      </div>
    </div>

    <div class="legend">
      <div class="legend-item" *ngFor="let legend of legends">
        <span class="dot" [style.backgroundColor]="legend.color"></span>
        {{ legend.label }}
      </div>
    </div>
  </div>

  <!-- Nap r√©szletei modal -->
  <app-day-details-modal
    [visible]="dayDetailsVisible"
    [day]="selectedDay"
    (close)="dayDetailsVisible = false">
  </app-day-details-modal>
</div>

<!-- Figyelmeztet≈ë modal -->
<app-alert-modal
  [visible]="modalVisible"
  [type]="modalType"
  [invalidFields]="invalidFields"
  [message]="modalMessage"
  (close)="modalVisible = false">
</app-alert-modal>
