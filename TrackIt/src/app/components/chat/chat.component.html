<div class="chat-container">
  <!-- Sidebar: Lista a kontaktról -->
  <div class="sidebar" *ngIf="isSidebarOpen">
    <button class="close-btn" (click)="toggleSidebar()">✖</button>
    <h2>Bejövő üzenetek</h2>
    <div class="contact" *ngFor="let contact of contacts" (click)="selectContact(contact)">
      <img [src]="'assets/images/profileKep.png'" alt="{{ contact.name }}" (error)="onImageError($event)" />
      <div class="info">
        <div class="name">{{ contact.name }}</div>
        <div class="last-message">
          {{ contact.message }}
          <span *ngIf="contact.time">· {{ contact.time }}</span>
        </div>
      </div>
      <span class="dot" *ngIf="contact.unread"></span>
    </div>
  </div>

  <!-- Chat Window: A kiválasztott kontakt beszélgetésének megjelenítése -->
  <div class="chat-window" *ngIf="selectedContact">
    <div class="chat-header">
      <div>
        <h4>{{ selectedContact.name }}</h4>
        <small>Utoljára elérhető 30 perce</small>
      </div>
      <div class="chat-date">{{ currentDate }}</div>
    </div>






    <!-- Üzenetek megjelenítése -->
    <div *ngFor="let msg of messages" class="message" [ngClass]="msg.senderId === currentUserId ? 'my-message' : 'other-message'">
      <div class="bubble">
        <strong *ngIf="msg.senderId !== currentUserId">{{ msg.sender.name }}</strong>
        <span>{{ msg.message }}</span> <!-- Használjuk a message mezőt -->
        <small>{{ msg.createdAt | date:'shortTime' }}</small> <!-- Idő formázása -->
      </div>
    </div>




    <!-- Üzenetküldő mező -->
    <div class="input-bar">
      <button class="open-sidebar-btn" *ngIf="!isSidebarOpen" (click)="toggleSidebar()">☰</button>
      <input [(ngModel)]="message" placeholder="Aa" />
      <button (click)="sendMessage()">➤</button>
    </div>
  </div>
</div>
